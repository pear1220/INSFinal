<?xml version="1.0" encoding="UTF-8"?>

<!-- ==== #26. mapper 기본설정 ==== -->
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"> 

<!-- ==== #27. 루트 엘리먼트 & 네임스페이스 설정(프로젝트 전체내에서 유일해야 한다.) ==== -->
<mapper namespace="mj">
	
	<resultMap type="com.spring.finalins.model.TeamVO" id="getTeamListMap">
		<result property="team_idx" column="team_idx" javaType="String"/>
		<result property="admin_userid" column="admin_userid" javaType="String"/>
		<result property="team_name" column="team_name" javaType="String" />
		<result property="team_delete_status" column="team_delete_status" javaType="String"/>
		<result property="team_visibility_status" column="team_visibility_status" javaType="String"/>
		<result property="team_image" column="team_image" javaType="String"/>
	</resultMap> 
	
	<select id="getTeamList" parameterType="String" resultMap="getTeamListMap">
		select team_idx, admin_userid, team_name, team_delete_status, team_visibility_status, team_image 
		from ins_team A join ins_team_member B
		on A.team_idx = B.fk_team_idx
		where B.team_userid = #{userid}
	</select>
	
	
	<resultMap type="com.spring.finalins.model.ProjectVO" id="getProjectListMap">
		<result property="project_idx" column="project_idx" javaType="String"/>
		<result property="fk_team_idx" column="fk_team_idx" javaType="String"/>
		<result property="project_name" column="project_name" javaType="String" />
		<result property="project_visibility_st" column="project_visibility_st" javaType="String"/>
		<result property="project_delete_status" column="project_delete_status" javaType="String"/>
		<result property="project_favorite_status" column="project_favorite_status" javaType="String"/>
		<result property="project_profilejpg" column="project_profilejpg" javaType="String" />
		<result property="fk_project_image_idx" column="fk_project_image_idx" javaType="String" />
	</resultMap>
		 
	<select id="getProjectList" parameterType="HashMap" resultMap="getProjectListMap">
		select project_idx, fk_team_idx, project_name, project_visibility_st, project_delete_status, project_favorite_status, project_profilejpg, fk_project_image_idx
		from ins_project A join ins_project_member B
		on A.project_idx = B.fk_project_idx
		where B.project_member_userid = #{userid} and fk_team_idx = #{fk_team_idx}
	</select>
	 

</mapper>
 